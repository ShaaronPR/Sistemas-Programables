# **Homework.**  

## A3.3 Temperature measurement circuit through a NodeMCU ESP32

> Delivery date: Tuesday, 08 June, 2021.
> 

# Microcontrollers.

## 游끥 A.3.3 Actividad de aprendizaje

Temperature measurement circuitry through an ESP32 NodeMCU
___

## 游닂 Instructions

- Bauen Sie auf der Grundlage von Abbildung 1 ein System auf, das in der Lage ist, die Temperatur und die Luftfeuchtigkeit der Umgebung durch eine elektronische Schaltung zu erfassen, indem Sie eine NodeMCU **ESP32** und einen **Sensor DHT11/DHT22** verwenden.
- Alle Aktivit칛ten oder Herausforderungen m칲ssen unter Verwendung des **MarkDown-Stils mit der Erweiterung .md** und der VSCode-Entwicklungsumgebung erstellt werden und als **Einzelseitendokument** ausgearbeitet werden, d. h., wenn das Dokument Bilder, Links oder irgendein externes Dokument enth칛lt, muss es 칲ber Tags und Links zug칛nglich sein und mit der Nomenklatur **A3.3_TituloActividad_NombreAlumno.pdf.** 
- Es ist eine Voraussetzung, dass die .md einen Link-Tag zum Repository Ihres Dokuments in GITHUB enth칛lt, z. B. **Link zu meinem GitHub** und am Ende der Challenge muss es auf Github hochgeladen werden.
- Aus der **.md** Datei exportieren Sie eine **.pdf** Datei, die im entsprechenden Bereich im Klassenzimmer hochgeladen werden sollte und als Nachweis f칲r Ihre Abgabe dient, da Sie hier als **offizielle** Plattform die Qualifikation Ihrer T칛tigkeit erhalten.
- Wenn man bedenkt, dass die .PDF-Datei, die aus der .MD-Datei gewonnen wurde, beide identisch sein m칲ssen.
- Ihr Repository muss neben einer **readme**.md-Datei in Ihrem Stammverzeichnis mit Informationen wie Studentendaten, Arbeitsteam, Fach, Karriere, Beraterdaten und sogar Logo oder Bilder einen Inhaltsbereich oder Index haben, die eigentlich Links oder **Verweise auf Ihre .md**-Dokumente sind, _Vermeiden Sie die Verwendung von Text_, um interne oder externe Links anzuzeigen.
- Wir schlagen eine Struktur wie die folgende vor, aber Sie k칬nnen jede andere Struktur verwenden, die Ihnen bei der Organisation Ihres Repositorys hilft.
  
```
- readme.md
  - blog
    - C3.1_TituloActividad.md
    - C3.2_TituloActividad.md
    - C3.3_TituloActividad.md
    - C3.4_TituloActividad.md
    - C3.5_TituloActividad.md
    - C3.6_TituloActividad.md
    - C3.7_TituloActividad.md
    - C3.8_TituloActividad.md
  - img
  - docs
    - A3.1_TituloActividad.md
    - A3.2_TituloActividad.md
    - A3.3_TituloActividad.md
```

### Sources of support to develop the activity:

   - [x] [Random Nerd Tutorial Touch pin](https://randomnerdtutorials.com/esp32-touch-pins-arduino-ide/)

   - [x] [Ejemplo de circuito con LED RGB Led](https://i0.wp.com/saber.patagoniatec.com/wp-content/uploads/2019/07/led-rgb-catodo-anado-comun.jpg)

___

## 九勇 Development

1.Verwenden Sie die folgende Liste von Materialien f칲r die Ausarbeitung der Aktivit칛t

| Cantidad | Descrition                                                                                                                                                                                                                           |
| -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1        | [Sensor temperatura y humedad DHT11](https://articulo.mercadolibre.com.mx/MLM-664315278-sensor-de-temperatura-y-humedad-dht11-cjumpers-arduino-pic-_JM#position=1&type=item&tracking_id=b203e8cd-c375-429a-9b75-8c57e8b35386) o [DHT22](https://articulo.mercadolibre.com.mx/MLM-608839646-sensor-de-temperatura-y-humedad-dht22-_JM?matt_tool=48904454&matt_word=&matt_source=google&matt_campaign_id=11714912137&matt_ad_group_id=113017550359&matt_match_type=&matt_network=g&matt_device=c&matt_creative=482511924687&matt_keyword=&matt_ad_position=&matt_ad_type=pla&matt_merchant_id=278747651&matt_product_id=MLM608839646&matt_product_partition_id=353037831509&matt_target_id=pla-353037831509&gclid=Cj0KCQjwh_eFBhDZARIsALHjIKf9L1OrV2kbvbHYn_0K_5Fuf7Eq00o5uvaNGMy8vGRpDv8y0LEyPugaAhxaEALw_wcB) |
| 1        | [Diodo led RGB](https://www.steren.com.mx/led-de-colores-rgb.html)                                                                                                                                                                                                                         |
| 1        | [Resistencia 4.7 kohms](https://www.electronicaplugandplay.com/componentes-pasivos/resistencias/resistencias-de-carbon/product/92-resistencia-4-7-k-1-4-watt)                                                                                                                                                                                                                 |
| 3        | [Resistencias 1 kohm](https://agelectronica.lat/pdfs/textos/R/RC.30E12.PDF)                                                                                                                                                                                                                   |
| 1        | [Fuente de voltaje de 5V](https://www.amazon.com.mx/Adaptador-corriente-100-alimentaci%C3%B3n-masajeador/dp/B087LY41PV/ref=asc_df_B087LY41PV/?tag=gledskshopmx-20&linkCode=df0&hvadid=450967569013&hvpos=&hvnetw=g&hvrand=16650618794470437898&hvpone=&hvptwo=&hvqmt=&hvdev=c&hvdvcmdl=&hvlocint=&hvlocphy=9073855&hvtargid=pla-1431055871432&psc=1)                                                                                                                                                                                                               |
| 1        | [NodeMCU ESP32](https://articulo.mercadolibre.com.mx/MLM-587686290-esp32-wifi-bluetooth-42-ble-nodemcu-esp8266-libro-gratis-_JM#position=1&type=item&tracking_id=84a6234b-5016-47eb-9950-39b49846ca72)                                |
| 1        | [BreadBoard](https://www.amazon.com.mx/Deke-Home-Breadboard-distribuci%C3%B3n-electr%C3%B3nica/dp/B086C9HK7V/ref=sr_1_22?__mk_es_MX=%C3%85M%C3%85%C5%BD%C3%95%C3%91&dchild=1&keywords=breadboard&qid=1599003455&sr=8-22)                                                                                                                                                                                                                            |
| 1        | [Jumpers M/M](https://www.amazon.com.mx/ELEGOO-Macho-Hembra-Macho-Macho-Hembra-Hembra-Protoboard/dp/B06ZXSQ5WG/ref=sr_1_1?__mk_es_MX=%C3%85M%C3%85%C5%BD%C3%95%C3%91&dchild=1&keywords=jumper+wires&qid=1599003519&sr=8-1)                                                                                                                                                                                                                           |
       

2. Based on the images shown in **Figures 1**, assemble the circuit into a single electronic circuit, in such a way as to obtain a system capable of fulfilling the instructions requested above for this activity.
  

<p align="center"> 
    <strong>Figura 1 Circuito ESP32 y Sensor DHT</strong></p>
    <p align="center">  
    <img alt="Logo" src="imagenes/C3.x_ESP32_DHT_wiring_bb.png" width=500 height=550>
</p>

3.  Una vez ensamblado el circuito anterior, agregue un LED RGB y elabore el programa que le permita al LED RGB funcionar como indicador para las siguientes condiciones:
    - El sensor de temperatura en todo momento estar치 sensando, enviando el valor registrado por la terminal serial, por ejemplo "Temperatura ambiente: 25 grados" y el **LED RGB** estar치 encendido de color verde.
    - El sensor de temperatura al registrar un valor del ~20% por arriba de la temperatura ambiental, deber치 mostrar el mensaje "Temperatura alta: ? grados" y el **LED RGB** se encender치 de color rojo.
    - El sensor de temperatura al registra un valor del ~20% por abajo de la temperatura ambiental, deber치 mostrar el mensaje "Temperatura baja: ? grados" y el **LED RGB** se encender치 de color azul.


4. Place here evidence that you consider important during the development of the activity.

## Code
```c++

// La librer칤a DHT es la que permite la comunicaci칩n con los sensores DHT11.
#include "DHT.h" 

// Pin donde est치 conectado el sensor (pin 4 del ESP32).
#define DHTPIN 4 

// Define el tipo de sensor, DHT 11.
#define DHTTYPE DHT11   

// Inicializamos el sensor DHT11 con el objeto llamado dht, de tipo DHT, asignando el tipo de 
// sensor y el pin.
DHT dht(DHTPIN, DHTTYPE);

// Definimos los pines (para el Led RGB) primera punta rojo 16, segunda no se define es negativo (-), 
// tercera verde 17, cuarta punta azul 5,  y canales para los PWM (Modulaci칩n por Ancho de Pulsos).
const int ledRojo = 16;
const int ledCanalRojo = 0;
const int ledVerde= 17;
const int ledCanalVerde= 1;
const int ledAzul= 5;
const int ledCanalAzul = 2;

// Definimos la frecuencia y resoluci칩n para los PWM.
const int freq = 5000;
const int resolucion = 8;

void setup() {
  // Inicia comunicaci칩n serial.
  Serial.begin(9600); 
  
  // Imprime un mensaje de prueba para cada pinMode (permite configurar a cada pin, de forma 
  // individual, en este caso como salida).
  pinMode(ledRojo, OUTPUT);
  pinMode(ledVerde, OUTPUT);
  pinMode(ledAzul, OUTPUT);
  
  // Asociar a 3 canales PWM internos del microcontrolador un canal, una frecuencia de conmutaci칩n 
  // y una resoluci칩n.
  ledcSetup(ledCanalRojo, freq, resolucion);
  ledcSetup(ledCanalVerde, freq, resolucion);
  ledcSetup(ledCanalAzul, freq, resolucion);
  
  // Asociar cada uno de los tres canales creados a un Pin de la placa para que las se침ales de 
  // cada canal se ejecuten por el Pin deseado.
  ledcAttachPin(ledRojo, ledCanalRojo);
  ledcAttachPin(ledVerde, ledCanalVerde);
  ledcAttachPin(ledAzul, ledCanalAzul);

  Serial.println("Mensaje de prueba..."); 
  
  // Iniciamos el dht.
  dht.begin();
}


void loop() {
  // Esperamos 2 segundos para continuar, ya que el sensor tiene como m치ximo son 2 segundos lo que
  // puede tardar el sensor en leer los valores.
  delay(2000);
  
  // Guarda el valor de la lectura de humedad en una variable float 
  float h = dht.readHumidity();

  // Guarda el valor de la lectura de temperatura en una variable float, la que por defecto esta 
  // en Celsius
  float t = dht.readTemperature();

  // Este if es para saber si hubo alg칰n fallo en la lectura del sensor DHT11, ya sean de conexi칩n 
  // u otra cosa.  
  if (isnan(h) || isnan(t)) {
    Serial.println("Error de lectura...");
    return;
  }
  
  // La temperatura deber치 de estar entre 16 y 24 para que el sensor este en verde.
  if(t > 16 && t < 24){
    Serial.print("Temperatura: ");
    Serial.print(t);
    Serial.println(" grados C");
    ledcWrite(ledCanalRojo,  0);
    ledcWrite(ledCanalVerde, 255);
    ledcWrite(ledCanalAzul,  0);
  } 

  // La temperatura deber치 ser mayor a 24 para que el sensor este en rojo.
  else if( t >= 24){
    Serial.print("Temperatura alta: ");
    Serial.print(t);
    Serial.println(" grados C");
    ledcWrite(ledCanalRojo,  255);
    ledcWrite(ledCanalVerde, 0);
    ledcWrite(ledCanalAzul,  0);
  } 

  // La temperatura deber치 ser menor a 16 para que el sensor este en azul.
  else {
    Serial.print("Temperatura baja: ");
    Serial.print(t);
    Serial.println(" grados C");
    ledcWrite(ledCanalRojo,  0);
    ledcWrite(ledCanalVerde, 0);
    ledcWrite(ledCanalAzul,  255);
  }
  
  Serial.println();
}

```
1. [ESP32 Capacitive Touch Sensor Pins with Arduino IDE](https://randomnerdtutorials.com/esp32-touch-pins-arduino-ide/)
2. [DHT11 Sensor de humedad y temperatura en 10 minutos](https://hetpro-store.com/TUTORIALES/sensor-dht11/)
3. [C칩mo utilizar el sensor DHT11 para medir la temperatura y humedad con Arduino](https://programarfacil.com/blog/arduino-blog/sensor-dht11-temperatura-humedad-arduino/)
4. [ESP32 with DHT11/DHT22 Temperature and Humidity Sensor using Arduino IDE](https://randomnerdtutorials.com/esp32-dht11-dht22-temperature-humidity-sensor-arduino-ide/?fbclid=IwAR0tZ756y0ppYRZakRaVRY5ImPLodxGCEZvxGc_B2Kef9lg8kKx9qW2-M98)
5. [TUTORIAL SENSOR DE TEMPERATURA Y HUMEDAD DHT11 Y DHT22](https://naylampmechatronics.com/blog/40_tutorial-sensor-de-temperatura-y-humedad-dht11-y-dht22.html)
6. [DESARROLLO DE UN SISTEMA DE CONTROL DE INVERSOR BASADO EN MICROCONTROLADOR PARA UN BANCO DE ENSAYOS DE ACCIONAMIENTOS EL칄CTRICOS](https://riunet.upv.es/bitstream/handle/10251/123114/20904350H_TFG_15596466342997165944694603949574.pdf?sequence=2&isAllowed=y)

5. Insert images of **evidence** such as team meetings held for the development of the activity.

<p align="center">   
    <img alt="ESP32" src="imagenes/ESP32-DOIT-DEVKIT-V1-Board-Pinout-30-GPIOs.png" width=800 height=500>
</p>
  
  <p align="center">   
    <img alt="cir" src="imagenes/Circuito.jpeg" width=800 height=500>
</p>
  
  <p align="center">   
    <img alt="blue" src="imagenes/Azul.jpeg" width=800 height=500>
</p>

<p align="center">   
    <img alt="green" src="imagenes/Verde.jpeg" width=800 height=500>
</p>

<p align="center">   
    <img alt="red" src="imagenes/Rojo.jpeg" width=800 height=500>
</p>


___

## Evidences

 

___

## Conclusions for each of the team members.

游 **Shaaron Porras Rangel:** 

Analyzing all the practices that we have done so far I think it is the one that has been the most difficult for us to perform, we had to try a DHT11 to make the connections since at the beginning it marked an error in the DHT connection, in the same way we tested other RGB LEDs to make sure that the error was in the connection and not in the Led. We also tried doing the practice with less resistors as the RGB Led light was too dim due to the resistors and it actually works quite well.

游냇 **Jesus Xavier Lopez Galaz:** 


游 **Karla Dinora Urrea Soto:**


游냤 **Carlos Fernando Leal Oliva:**


___

## 游눢 Rubric


| **Standards** | **Description**                                                                                    | **Score** |
| ------------- | -------------------------------------------------------------------------------------------------- | --------- |
| Instructions  | Is each of the items listed in the Instructions section met?                                        | 10        |
| Development   | Did you respond to each of the points requested in the development of the activity?                 | 60        |
| Demonstration | Does the student introduce him/herself during the explanation of the functionality of the activity? | 20        |
| Conclusions   | Is a personal opinion of the activity included for each team member?                                | 10        |


___

## Equipment repositories

游 [15211343 - Shaaron Porras Rangel](https://github.com/ShaaronPR/Tareas)

游냇 [18212208 - Jesus Xavier Lopez Galaz](https://github.com/LopezJesus/Sistemas-Programables)

游 [17211568 - Karla Dinora Urrea Soto](https://github.com/Karldin11/SistemasProgramables)

游냤 [18212205 - Carlos Fernando Leal Oliva](https://github.com/FernandoOliva18212205/SistemasProgramables)

游늬 [Link to group activity](https://github.com/ShaaronPR/Sistemas-Programables/blob/main/A3.3_NombreApellido_Sistematicos.md)


游 [Home](https://github.com/ShaaronPR/Sistemas-Programables)


